(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4131,776],{77179:function(e,n,t){var l=t(18361);e.exports=function(e){return l(e,5)}},39229:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});t(29901);var l=t(61250),i=function(e){var n=e.additionalClasses,t=e.children;return(0,l.jsx)("div",{className:"border bg-white border-gray-100 rounded-md ".concat(n),children:t})}},8893:function(e,n,t){"use strict";t.d(n,{X:function(){return p}});var l=t(77916),i=t(51848),r=t(83849),a=t.n(r),o=t(29901),s=t(95893),c=t(74536),u=t(61250),d=["disabled","label","required","valueLabel","id","onChange","name","additionalClasses","checkboxSize","labelClass","icon","indeterminate"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=function(e){var n=e.disabled,t=(e.label,e.required),l=e.valueLabel,r=void 0===l?"":l,f=e.id,p=void 0===f?(0,s.ZP)("checkbox-"):f,h=e.onChange,x=e.name,b=e.additionalClasses,v=e.checkboxSize,y=void 0===v?"small":v,g=e.labelClass,j=void 0===g?"text-sm":g,w=e.icon,C=e.indeterminate,k=void 0!==C&&C,O=(0,i.Z)(e,d),N=(0,o.useState)(!1),P=N[0],S=N[1],Z=(0,o.useState)(!1),I=Z[0],L=Z[1],E=(0,o.useState)(null),A=E[0],T=E[1],_=(0,o.useCallback)((function(){S(!0)}),[]),M=(0,o.useCallback)((function(){S(!1)}),[]);(0,o.useEffect)((function(){A&&(A.indeterminate=!!k)}),[A,k]);var F=(0,o.useCallback)((function(e){e.stopPropagation(),h(e.target.checked),e.target.checked?L(!0):L(!1)}),[L,h]),U=(0,u.jsxs)("div",{className:"inline-flex items-center justify-center space-x-1 ".concat(b),children:[(0,u.jsxs)("div",{className:a()({"relative inset-x-0 items-center":!0,"h-5 w-5 min-h-[1rem]":"extra-small"===y,"h-6 w-6 min-h-[1.75rem]":"small"===y,"h-10 w-10 min-h-[2.5rem] min-w-[2.5rem]":"large"===y}),children:[P&&(0,u.jsx)("div",{className:a()({"absolute inset-0 m-auto rounded-full bg-gray-100":!0,"bg-teal-100":I,"h-5 w-5":"extra-small"===y,"h-6 w-6":"small"===y,"h-9 w-9":"large"===y})}),(0,u.jsx)("input",m(m({name:x||p,ref:T,type:"checkbox",id:p,required:t,disabled:n,"aria-labelledby":"label-".concat(p),onChange:F,onClick:function(e){e.stopPropagation()}},O),{},{className:a()({"bg-gray-100 text-gray-300 cursor-not-allowed":n,"absolute inset-0 m-auto border focus:ring-teal-300 focus:ring-offset-0 text-teal-300 border-gray-300 bg-gray-100 hover:cursor-pointer checkbox":!0,checked:I,indeterminate:k,"h-3 w-3 rounded-3":"extra-small"===y,"h-4 w-4 rounded-3":"small"===y,"h-6 w-6 rounded-5":"large"===y}),onMouseEnter:_,onMouseLeave:M}))]}),(0,u.jsxs)("label",{id:"label-".concat(p),htmlFor:p,className:a()(j,{"font-medium text-gray-500 dark:text-gray-300 flex flex-row items-center justify-start ml-0":!0}),children:[w&&(0,u.jsx)(c.J,{name:w,color:"text-gray-400",small:!0,className:"h-[16px] -ml-1"}),(0,u.jsx)("span",{className:"ml-1",children:r})]})]});return(0,u.jsx)(u.Fragment,{children:U})}},35415:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var l=t(55312),i=t(89303),r=t(24642),a=t.n(r),o=t(29901),s=t(389),c=t(54573),u=t(48274),d=t(68125),f=t(82446),m=t(84815),p=t(39229),h=t(95618),x=t(74536),b=t(15830),v=t(18732),y=t(32690),g=t(61250),j=function(e){var n=e.collectionId,t=e.collectionType,l=e.fileCount,i=e.locked,r=e.name;return(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsxs)("div",{className:"flex flex-col w-10/12 space-y-0.5",children:[(0,g.jsxs)("div",{className:"flex flex-row",children:[i?(0,g.jsx)(b.u,{title:"Only you can see and edit this collection",skidding:100,className:"-ml-1",placement:"bottom",children:(0,g.jsx)(x.J,{name:"lock-fill",small:!0,className:"mt-[3px] mr-1",color:"text-gray-400"})}):"",(0,g.jsx)(v.Z,{truncate:!0,title:r,children:r})]}),(0,g.jsx)("div",{className:"flex space-x-1",children:(0,g.jsx)(v.Z,{variant:"caption-1",truncate:!0,color:"gray",children:(0,g.jsx)("span",{children:"".concat(l,l>1?" animations":" animation")})})})]}),t&&n&&(0,g.jsx)(y.S,{button:(0,g.jsx)(h.h,{sizeClass:"w-8 h-8",name:"kebab-menu",darker:!0}),placement:"bottom-start",collectionType:t,collectionName:r,collectionId:n,className:"left-0"})]})},w=function(e){var n=e.collectionId,t=e.collectionType,l=e.fileCount,i=e.href,r=e.images,a=e.locked,o=e.name;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"w-full h-full animation-card",children:(0,g.jsx)(f.default,{href:i,children:(0,g.jsxs)("div",{className:"absolute inset-0 w-full cursor-pointer transition duration-100 ease-out border-gray-100 bg-white border-[3px] rounded-md overflow-hidden flex flex-col p-3",children:[l?(0,g.jsxs)(g.Fragment,{children:[1===l&&(0,g.jsx)(p.Z,{additionalClasses:"overflow-hidden h-full w-full relative",children:(0,g.jsx)("div",{className:"absolute inset-0 mx-auto",children:r&&r.length>0&&(0,g.jsx)(m.y,{src:r[0],alt:"preview-thumbnail-1"})})}),l&&2===l&&(0,g.jsxs)("div",{className:"grid h-full grid-cols-2 gap-2",children:[(0,g.jsx)("div",{className:"h-full col-span-1",children:(0,g.jsx)(p.Z,{additionalClasses:"overflow-hidden h-full",children:r&&r.length>0&&(0,g.jsx)(m.y,{alt:"preview-thumbnail-1",src:"".concat(r[0])})})}),(0,g.jsx)("div",{className:"h-full col-span-1",children:(0,g.jsx)(p.Z,{additionalClasses:"overflow-hidden h-full",children:r&&r.length>0&&(0,g.jsx)(m.y,{alt:"preview-thumbnail-2",src:r[1]})})})]}),l&&l>2&&(0,g.jsxs)("div",{className:"grid w-full h-full grid-cols-3 gap-2 ",children:[(0,g.jsx)("div",{className:"relative col-span-2",children:(0,g.jsx)(p.Z,{additionalClasses:"overflow-hidden absolute inset-0",children:r&&r.length>0&&r[0]&&(0,g.jsx)(m.y,{alt:"preview-thumbnail-1",src:r[0]})})}),(0,g.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,g.jsx)("div",{className:"relative flex-1",children:(0,g.jsx)(p.Z,{additionalClasses:"overflow-hidden absolute inset-0",children:r&&r.length>0&&r[1]&&(0,g.jsx)(m.y,{alt:"preview-thumbnail-2",src:r[1]})})}),(0,g.jsx)("div",{className:"relative flex-1",children:l&&3===l?(0,g.jsx)(p.Z,{additionalClasses:"overflow-hidden absolute inset-0",children:r&&r.length>0&&r[2]&&(0,g.jsx)(m.y,{alt:"preview-thumbnail-3",src:r[2]})}):(0,g.jsx)("div",{className:"flex items-center justify-center flex-grow w-full h-full rounded-md bg-gray-50",children:(0,g.jsxs)("p",{className:"text-xl text-gray-900",children:["+",l-2," "]})})})]})]})]}):(0,g.jsx)("div",{className:"relative flex items-center justify-center w-full h-full overflow-hidden",children:(0,g.jsx)("div",{className:"w-20 h-20 opacity-40",children:(0,g.jsx)(m.y,{src:"/images/empty-states/empty-folder-thumbnail.svg",alt:"no-thumbnail"})})}),(0,g.jsx)("div",{className:"mt-2 min-h-[40px]",children:(0,g.jsx)(j,{fileCount:l,locked:a,name:o,collectionId:n,collectionType:t})})]})})})})},C=t(63862),k=function(e){var n=e.onCreateCollection,t=e.title;return(0,g.jsxs)("div",{className:"flex items-center w-full",children:[(0,g.jsx)(v.Z,{className:"text-2xl text-gray-900 line-clamp-1 font-lf-bold",variant:"heading-2",color:"gray",darkest:!0,children:t}),(0,g.jsx)("div",{className:"ml-auto",children:(0,g.jsx)(C.z,{text:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.J,{name:"plus",className:"w-5 h-4 mr-1"}),(0,g.jsx)("span",{className:"mr-1 text-sm font-bold tracking-wider",children:"New"})]}),additionalClass:"h-8 !px-2",variant:"primary",onClick:function(){return null==n?void 0:n()}})})]})},O=t(28420),N=t(96312),P=function(e){var n=e.collectionList,t=e.downloadsCollectionList,l=e.likesCollectionList,i=e.onCreateCollection,r=e.onLoadMore,a=e.paginationLoading,s=void 0!==a&&a,c=(0,N.Dy)((function(e){var n;null!=e&&null!==(n=e[0])&&void 0!==n&&n.isIntersecting&&r&&r()})),f=(0,o.useMemo)((function(){var e;return null==n||null===(e=n.edges)||void 0===e?void 0:e.map((function(e,t){var l=e.node,i="folder-card-".concat(null==l?void 0:l.id);return t===n.edges.length-1?(0,g.jsx)("div",{ref:c,children:(0,g.jsx)(w,{fileCount:null==l?void 0:l.animationsCount,images:null==l?void 0:l.collectionAnimationPreviews.map((function(e){return e.image})),locked:(null==l?void 0:l.type)===O.p.PRIVATE,name:null==l?void 0:l.title,href:"/my-collections/".concat(null==l?void 0:l.id),collectionId:null==l?void 0:l.id,collectionType:null==l?void 0:l.type},i)},i):(0,g.jsx)(w,{fileCount:null==l?void 0:l.animationsCount,images:null==l?void 0:l.collectionAnimationPreviews.map((function(e){return e.image})),locked:(null==l?void 0:l.type)===O.p.PRIVATE,name:null==l?void 0:l.title,href:"/my-collections/".concat(null==l?void 0:l.id),collectionId:null==l?void 0:l.id,collectionType:null==l?void 0:l.type},i)}))}),[n,c]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(d.u,{title:"My Collections",isLoading:!(n&&l&&t),header:(0,g.jsx)(k,{title:"My Collections",onCreateCollection:i}),children:(0,g.jsxs)(u.c,{paginationLoading:s,children:[l&&(0,g.jsx)(w,{fileCount:l.totalCount||0,images:l.edges.map((function(e){var n;return null!==(n=e.node.imageUrl)&&void 0!==n?n:""})),locked:!0,name:"Appreciated animations",href:"/my-collections/appreciated-animations"}),t&&(0,g.jsx)(w,{fileCount:t.totalCount||0,images:t.edges.map((function(e){var n;return null!==(n=e.node.imageUrl)&&void 0!==n?n:""})),locked:!0,name:"Downloaded animations",href:"/my-collections/downloaded-animations"}),f]})})})},S=t(84270),Z=t.n(S),I=t(8893),L=t(24046),E=t(25067),A=t(47671),T=function(e){var n=e.onCancel,t=e.onSubmit,r=e.show,c=o.useState(O.p.PUBLIC),u=(0,i.Z)(c,2),d=u[0],f=u[1],m=(0,s.Db)(A.mi),p=(0,i.Z)(m,2)[1],h=(0,E.p)(),y=(0,o.useCallback)(function(){var e=(0,l.Z)(a().mark((function e(n,t){var l,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}return e.prev=1,e.next=4,p({input:{title:Z()(n),type:t}});case 4:if((l=e.sent).data){e.next=7;break}throw new Error((null==l||null===(i=l.error)||void 0===i?void 0:i.message)||"GQL error");case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),null==h||h.pushError("Fail to create collection. ".concat((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Unknown error occur"));case 13:e.next=16;break;case 15:null==h||h.pushError("Fail to create collection. Collection name cannot be empty!");case 16:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n,t){return e.apply(this,arguments)}}(),[p,h]),j=(0,o.useCallback)((function(e){f(e?O.p.PRIVATE:O.p.PUBLIC)}),[]),w=(0,o.useCallback)((function(e){y(e,d),t()}),[d,y,t]),C=(0,o.useCallback)((function(){f(O.p.PUBLIC),n()}),[n]);return(0,g.jsx)(L.f,{show:r,title:"Create new collection",placeholder:"Collection name",successBtnText:"Create",additionalDescription:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(I.X,{additionalClasses:"ml-[-2px] mb-5",label:"Make this plan billable",checked:d===O.p.PRIVATE,valueLabel:(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,g.jsx)(x.J,{name:"lock-fill",className:"w-4 h-4"}),(0,g.jsx)(v.Z,{variant:"caption-1",children:(0,g.jsx)("span",{children:"Make it private"})}),(0,g.jsx)(b.u,{title:"Only you can see and edit this collection",placement:"right",children:(0,g.jsx)(x.J,{name:"info",className:"w-4 h-4"})})]})}),onChange:j})}),onCancel:C,onSubmit:w})},_=t(23314);function M(){var e,n,t,r=(0,o.useState)(!1),u=r[0],d=r[1],f=(0,o.useState)(!1),m=f[0],p=f[1],h=(0,s.m8)(),x=(0,o.useCallback)((function(){d(!1)}),[]),b=(0,o.useCallback)((function(){d(!1)}),[]),v=(0,s.aM)({query:A.Cb,variables:{first:18}}),y=(0,i.Z)(v,1)[0],j=(0,s.aM)({query:_.At,variables:{first:3},requestPolicy:"cache-and-network"}),w=(0,i.Z)(j,1)[0],C=(0,s.aM)({query:_.b_,variables:{first:3},requestPolicy:"cache-and-network"}),k=(0,i.Z)(C,1)[0],O=(0,o.useCallback)((0,l.Z)(a().mark((function e(){var n,t,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.data&&!y.fetching&&!m){e.next=2;break}return e.abrupt("return");case 2:if(null!==(n=y.data.publicAnimationCollectionsByUser.pageInfo)&&void 0!==n&&n.hasNextPage){e.next=4;break}return e.abrupt("return");case 4:if(null!==(t=y.data.publicAnimationCollectionsByUser.pageInfo)&&void 0!==t&&t.endCursor){e.next=6;break}return e.abrupt("return");case 6:return p(!0),console.log("Pagination: ",y.data.publicAnimationCollectionsByUser),e.prev=8,e.next=11,h.query(A.Cb,{after:null===(l=y.data.publicAnimationCollectionsByUser.pageInfo)||void 0===l?void 0:l.endCursor,first:20}).toPromise();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(8),console.error(e.t0),p(!1);case 17:p(!1);case 18:case"end":return e.stop()}}),e,null,[[8,13]])}))),[h,y,m]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(P,{paginationLoading:m,collectionList:null===(e=y.data)||void 0===e?void 0:e.publicAnimationCollectionsByUser,likesCollectionList:null===(n=k.data)||void 0===n?void 0:n.viewerPublicAnimationLikes,downloadsCollectionList:null===(t=w.data)||void 0===t?void 0:t.viewerPublicAnimationDownloads,onCreateCollection:function(){return d(!0)},onLoadMore:O}),(0,g.jsx)(T,{show:u,onCancel:x,onSubmit:b}),(0,g.jsx)(c.Z,{show:!0})]})}},81813:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-collections",function(){return t(35415)}])},83907:function(e,n,t){e=t.nmd(e),function(t,l){"use strict";var i={};t.PubSub?(i=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=i,function(e){var n={},t=-1,l="*";function i(e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!0;return!1}function r(e){return function(){throw e}}function a(e,n,t){try{e(n,t)}catch(e){setTimeout(r(e),0)}}function o(e,n,t){e(n,t)}function s(e,t,l,i){var r,s=n[t],c=i?o:a;if(Object.prototype.hasOwnProperty.call(n,t))for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&c(s[r],e,l)}function c(e,n,t){return function(){var i=String(e),r=i.lastIndexOf(".");for(s(e,e,n,t);-1!==r;)r=(i=i.substr(0,r)).lastIndexOf("."),s(e,i,n,t);s(e,l,n,t)}}function u(e){var t=String(e);return Boolean(Object.prototype.hasOwnProperty.call(n,t)&&i(n[t]))}function d(e){for(var n=String(e),t=u(n)||u(l),i=n.lastIndexOf(".");!t&&-1!==i;)i=(n=n.substr(0,i)).lastIndexOf("."),t=u(n);return t}function f(e,n,t,l){var i=c(e="symbol"==typeof e?e.toString():e,n,l);return!!d(e)&&(!0===t?i():setTimeout(i,0),!0)}e.publish=function(n,t){return f(n,t,!1,e.immediateExceptions)},e.publishSync=function(n,t){return f(n,t,!0,e.immediateExceptions)},e.subscribe=function(e,l){if("function"!=typeof l)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(n,e)||(n[e]={});var i="uid_"+String(++t);return n[e][i]=l,i},e.subscribeAll=function(n){return e.subscribe(l,n)},e.subscribeOnce=function(n,t){var l=e.subscribe(n,(function(){e.unsubscribe(l),t.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){n={}},e.clearSubscriptions=function(e){var t;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&delete n[t]},e.countSubscriptions=function(e){var t,l,i=0;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)){for(l in n[t])i++;break}return i},e.getSubscriptions=function(e){var t,l=[];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&l.push(t);return l},e.unsubscribe=function(t){var l,i,r,a=function(e){var t;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e))return!0;return!1},o="string"==typeof t&&(Object.prototype.hasOwnProperty.call(n,t)||a(t)),s=!o&&"string"==typeof t,c="function"==typeof t,u=!1;if(!o){for(l in n)if(Object.prototype.hasOwnProperty.call(n,l)){if(i=n[l],s&&i[t]){delete i[t],u=t;break}if(c)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&i[r]===t&&(delete i[r],u=!0)}return u}e.clearSubscriptions(t)}}(i)),void 0!==e&&e.exports&&(n=e.exports=i),n.PubSub=i,e.exports=n=i}("object"==typeof window&&window||this)}},function(e){e.O(0,[5471,9837,785,532,8361,4270,3069,7206,4573,9774,2888,179],(function(){return n=81813,e(e.s=n);var n}));var n=e.O();_N_E=n}]);